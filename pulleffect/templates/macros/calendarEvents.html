{% macro eventScripts() -%}
<script>
var getGoogleCalendarEvents = function() {

    $.ajax({
        type: "GET",
        url: "{{ url_for('gcal.get_calendar_events') }}",
        success: displayEvents,
        error: function(err) {
            console.log(err);
        }
    });
}

var displayEvents = function(response) {

    var events = response.calendar_events.items;

    $("#eventsTable").empty();

    for (i = 0; i < 10 && i < events.length; i++) {
        var summary = events[i].summary;
        var start = events[i].start.dateTime;
        var end = events[i].end.dateTime;

        //  console.log(summary + ", " + moment(start).format("h:mm A") + ", " + moment(end).format("h:mm A"));

        htmlStr = "<tr class='event'>";
        htmlStr += "<td>" + summary + "</td>";
        htmlStr += "<td>" + moment(start).format("MM/DD  h:mm A") + "</td>";
        htmlStr += "<td>" + moment(end).format("MM/DD  h:mm A") + "</td>";
        htmlStr += "</tr>";

        $("#eventsTable").append(htmlStr);

    }

}
</script>
{%- endmacro %}
